(function(){App.pages.home=function(){var e,t=$("#s"),a=$("#s-favorites"),r=a.attr("href").split(";"),o=$(".api_content");t.parent().on("submit",function(e){e.preventDefault(),t.focusout()}).on("keyup",function(a){clearTimeout(e),13===a.which?(o.empty(),App.modules.marvelApi.search("getCharacters",{nameStartsWith:t.val()})):t.val()&&(e=setTimeout(function(){o.empty(),App.modules.marvelApi.search("getCharacters",{nameStartsWith:t.val()})},1e3))}),a.on("click",function(e){e.preventDefault(),o.empty(),r.forEach(function(e){App.modules.marvelApi.search("getCharacter",{characterId:e})})})},App.modules.marvelApi={search:function(e="getCharacters",t={}){$(".loader").show(),$.ajax({method:"POST",url:App.baseUrl+"includes/ajaxrequest.php",dataType:"json",data:{params:t,method:e}}).done(function(e){200==e.code&&void 0!==e.data?e.data.total>0?App.modules.marvelApi.show(e.data.results):App.modules.marvelApi.error({message:"No characters found"}):App.modules.marvelApi.error(e)}).fail(function(e,t){alert(t)}).always(function(){$(".loader").hide()})},show:function(e){App.modules.templateHtml("#charactersTemplate",e,".api_content")},error:function(e){App.modules.templateHtml("#errorTemplate",e,".api_content")}},App.modules.templateHtml=function(e,t,a){var r=$.templates(e).render(t);$(a).append(r)}}).call(this);